{% extends 'base.html' %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='signup_login.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}
{% block body %}
        <nav>
            <div class="logo">
                <img src="../static/image/logo.png">
            </div>

            <ul>
                <li><a href="/index"><i class="fa fa-home"></i> Home</a></li>
            </ul>

            <div>
                <a href="/favorites"><i class="fa-user"></i></a>
            </div>

        </nav>
    {% block passconf %}
  <form method="POST" action="/login">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email"><br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password"><br>
    <button>{{button}}<i class="fa-solid fa-angle-right"></i></button>
  </form>
  {% endblock %}
  {% for message in get_flashed_messages() %}
  <div class="alert alert-warning">{{ message }}</div>
{% endfor %}
<!-- <p id="fail"></p> -->
<!-- <button>{{button}}<i class="fa-solid fa-angle-right"></i></button> -->
  <!-- <script src="{{ url_for('static', filename='functions.js') }}"></script>
  <script>
    const form = document.querySelector('form');
    const button = document.querySelector('button');
    button.addEventListener("click", () => {
        if (document.querySelector('#passwordconf') != null && document.querySelector("#password").value !== document.querySelector("#passwordconf").value){
            document.querySelector("#fail").innerHTML = "Passwords do not match";
        }
        else {
          const json = formtoJSON(form);
          const a = postRequest(json, {{endpoint | safe}});
          a.onload = () => {
            if (a.responseText === "fail"){
                document.querySelector("#fail").innerHTML = "Incorrect email or password";
                }
            let b = JSON.parse(a.response);
            if (Object.keys(b).length > 1) {
              setCookie("JWT", b.jwt, 10);
            }
            window.location.assign(`${b.endpoint}?jwt=${b.jwt}`);
          };
        }
    });
  </script> -->
{% endblock %}
</html>